<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Data Spaces - iris</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../quickstart.html"><strong aria-hidden="true">2.</strong> Quickstart</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../quickstart/tech_overview.html"><strong aria-hidden="true">2.1.</strong> Technical Overview</a></li><li class="chapter-item expanded "><a href="../quickstart/quick_setup.html"><strong aria-hidden="true">2.2.</strong> Quick setup guide</a></li><li class="chapter-item expanded "><a href="../quickstart/data_ingestion.html"><strong aria-hidden="true">2.3.</strong> Data Ingestion</a></li><li class="chapter-item expanded "><a href="../quickstart/data_ejection.html"><strong aria-hidden="true">2.4.</strong> Data Ejection</a></li></ol></li><li class="chapter-item expanded "><a href="../developers.html"><strong aria-hidden="true">3.</strong> Developers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../quickstart/data_assets.html"><strong aria-hidden="true">3.1.</strong> Data Management</a></li><li class="chapter-item expanded "><a href="../quickstart/data_spaces.html" class="active"><strong aria-hidden="true">3.2.</strong> Data Spaces</a></li><li class="chapter-item expanded "><a href="../developers/contracts.html"><strong aria-hidden="true">3.3.</strong> Contracts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../contracts/contracts_chain_extension.html"><strong aria-hidden="true">3.3.1.</strong> Chain Extension</a></li><li class="chapter-item expanded "><a href="../contracts/composable_access_rules.html"><strong aria-hidden="true">3.3.2.</strong> Composable Access Rule and Rule Executor</a></li><li class="chapter-item expanded "><a href="../contracts/contracts_asset_exchange.html"><strong aria-hidden="true">3.3.3.</strong> Iris Asset Exchange</a></li></ol></li><li class="chapter-item expanded "><a href="../ui.html"><strong aria-hidden="true">3.4.</strong> Iris UI</a></li></ol></li><li class="chapter-item expanded "><a href="../reference.html"><strong aria-hidden="true">4.</strong> Reference</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../pallets.html"><strong aria-hidden="true">4.1.</strong> Pallets</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../pallets/pallet_data_assets.html"><strong aria-hidden="true">4.1.1.</strong> Data-Assets</a></li><li class="chapter-item expanded "><a href="../pallets/pallet_authorities.html"><strong aria-hidden="true">4.1.2.</strong> Authorities</a></li><li class="chapter-item expanded "><a href="../pallets/pallet_iris_ledger.html"><strong aria-hidden="true">4.1.3.</strong> Ledger</a></li><li class="chapter-item expanded "><a href="../pallets/pallet_data_spaces.html"><strong aria-hidden="true">4.1.4.</strong> Data-Spaces</a></li><li class="chapter-item expanded "><a href="../pallets/pallet_authorization.html"><strong aria-hidden="true">4.1.5.</strong> Authorization</a></li><li class="chapter-item expanded "><a href="../pallets/pallet_proxy.html"><strong aria-hidden="true">4.1.6.</strong> Proxy</a></li><li class="chapter-item expanded "><a href="../pallets/pallet_ipfs.html"><strong aria-hidden="true">4.1.7.</strong> IPFS</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../glossary.html"><strong aria-hidden="true">5.</strong> Glossary</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">iris</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="data-spaces"><a class="header" href="#data-spaces">Data Spaces</a></h1>
<p>TODO:</p>
<ul>
<li>move RuleExecutor and composable access rules to dataspace level</li>
</ul>
<h2 id="what-is-a-data-space"><a class="header" href="#what-is-a-data-space">What is a data space?</a></h2>
<p>A data space is a user created and owned 'space' that data can be associated with. Data spaces allows nodes to group together disparate data sets based on ownership of the data asset classes that the data is associated with. A data space allows the owner to specify which nodes are authorized to associate data with their space. Data spaces form the basis for moderation within the network.</p>
<p>For example, a dapp developer may want all data added to iris that should be associated with their application to be both easily found within Iris and also subject to additional checks specific to their application, such as only allowing certain types of file extensions or moderating data in some specific way (more on this in the moderation and governance section). By creating their own data space, the owner can authorize users of their dapp to associate data with the space.</p>
<h2 id="the-role-of-dataspaces"><a class="header" href="#the-role-of-dataspaces">The Role of Dataspaces</a></h2>
<ul>
<li>search/indexing/subindexing?</li>
<li>TPRE</li>
<li>availability</li>
<li>moderation</li>
<li>dataspace owners pay to maintain storage?</li>
<li>dataspaces should have rules for who can deposit data (e.g. shareholders only)</li>
</ul>
<h2 id="creating-a-data-space"><a class="header" href="#creating-a-data-space">Creating a Data Space</a></h2>
<p>A data space is really an asset class mapped to a set of configuration items.</p>
<h2 id="granting-access"><a class="header" href="#granting-access">Granting access</a></h2>
<p>To grant access to your data space to another address in the network, mint new assets from the asset class and assign them to the given address. This can be done in several different ways with varying degress of control over how the holder of the asset can associate their own data assets the data space. In general, either the owner of the asset class can:</p>
<ul>
<li>lock transfers of the asset, meaning the holder cannot transfer it to any other accounts</li>
<li>retain rights to revoke the asset, meaning the data space administrator can block previously authorized users</li>
</ul>
<p><img src="../../resources/data_spaces.png" alt="data spaces" /></p>
<h2 id="data-spaces-and-tpre"><a class="header" href="#data-spaces-and-tpre">Data spaces and TPRE</a></h2>
<p>Dataspaces allow the Iris network to perform TPRE without the need for the data owner (DO) to provide a new re-encryption key each time that a data consumer (DC) wants to access data associated with their asset class. Really, what we're accomplishing here is a mechanism to share a secret key without exposing it to the network. </p>
<p>In the following, let $enc^{SK}_{PK_0, .., PK_m}(f)$ represent the data $f$ encrypted using the public keys $PK_0, ..., PK_m$ and secret key $SK$. When $SK = {PK_0,  ..., PK_M}$, we omit the superscript and simple write $enc_i(m)$, where $i$ represents some address with a public/secret key pair.</p>
<p>Let $DSO$ represent the owner of a dataspace $DS$ and $S = {s_1, ..., s_k}$ be the set of shareholders of the dataspace (addresses that hold some quantity of the asset minted from $DS$). Assume that a data owner, $DO$, owns some asset $A$ associated with some data $f$. Now, we will detail the process through which $DO$ can associated their asset with $DSO$ to enable the data to be retrieved from the network.</p>
<p>In the following, let $\delta, \theta &gt; 0$ represent the shares of key fragments to create and threshold be the number of fragments needed to reconstruct the reencryption key, respectively. In order for the data associated with the asset $A$ to be accessible outside of the network, $DO$ must depsoit their data to a dataspace. By deposit we mean that $A$ must generate $\delta$ key fragments of the secret key used to encrypt the data $A$ and distribute each fragment to a distinct proxy node.</p>
<p>$DO$ generates a keypair $(PK_A, SK_A)$ and uses it to construct the ciphertext of their data $f -&gt; enc_{PK_A}^{DO}(f) -&gt; C_f$.
Next, $DO$ uses generates key fragments such that they enable us to perform ${\delta, \theta}$ -TPRE. So we perform:
$(C_f, \delta, \theta, SK_A, PK_{DO}) -&gt; {k_1, ..., k_\delta}$. Each $k_i$ is then assigned to a distinct shareholder $s_i \in S$. For each $i = 1, ..., \delta$, $DO$ generates $enc_{PK_{s_i}}^{DO}(SK_A)$ and gossips the encrypted key fragments to the network. </p>
<p>Now suppose some data consumer node, $DC$, wants to retrieve the data associated with the asset class that was deposited into the dataspace $D$. In order to do so, $DC$ requires the secret key $SK_A$ in order to recover the plaintext $enc_{SK_A}^{DO}(f) -&gt; f$. To recover the secret key, $DC$ must collect $\theta$ key fragments from shareholders of the dataspace. The recovery process is triggered when $DC$ invokes the rule executor associated with the dataspace. If each composable access rule evaluates to true, then the data becomes unlocked for $DC$ within the dataspace $DS$. This authorizes $DC$ to request key fragments from up to $\theta$ shareholders. When each key fragment is recovered, $DC$ uses each fragments to recover the secret key $SK_A$, after which they use the secret key to decrypt the data.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../quickstart/data_assets.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../developers/contracts.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../quickstart/data_assets.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../developers/contracts.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
